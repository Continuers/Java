# 30.集合进阶

![](https://github.com/Continuers/Java/blob/main/picture/165.png)



## 1.Collection



### 1.集合知识回顾

![](https://github.com/Continuers/Java/blob/main/picture/166.png)



### 2.集合类体系结构

![](https://github.com/Continuers/Java/blob/main/picture/167.png)



### 3.Collection  集合的概述和使用

![](https://github.com/Continuers/Java/blob/main/picture/168.png)

```java
package com.itrs;

import java.util.ArrayList;
import java.util.Collection;

/*
    创建 Collection集合的对象
    多态的方式
    Arraylist()
 */
public class ConllectionDemo {
    public static void main(String[] args) {
        //创建 Collection集合的对象
        Collection<String> c = new ArrayList<String>();

        //添加元素： boolean add (E e)
        c.add("hello");
        c.add("world");
        c.add("java");

        //输出集合对象
        System.out.println(c);      //[hello, world, java]
    }

}
```



### 4.Collection 集合常用方法

![](https://github.com/Continuers/Java/blob/main/picture/169.png)

```java
package com.itrs;

import java.util.ArrayList;
import java.util.Collection;

/*
    Collection集合常用方法:
        boolean add(E e):添加元素
        boolean remove(Object o):从集合中移除指定的元素
        void clear():清空集合中的元素
        boolean contains( Object o):判断集合中是否存在指定的元素
        boolean isempty():判断集合是否为空
        int size():集合的长度,也就是集合中元素的个数

    Alt+7    打开一个窗口，能够看到类的所有信息
 */
public class ConllectionDemo2 {
    public static void main(String[] args) {
        //创建集合对象
        Collection<String> c = new ArrayList<String>();
        //boolean add(E e):添加元素
//        System.out.println(c.add("hello"));
//        System.out.println(c.add("world"));
//        System.out.println(c.add("world"));
        c.add("hello");
        c.add("world");
        c.add("java");

        //boolean remove(Object o):从集合中移除指定的元素
//        System.out.println(c.remove("world"));
//        System.out.println(c.remove("javaee"));

        //void clear():清空集合中的元素
//        c.clear();

        //boolean contains( Object o):判断集合中是否存在指定的元素
//        System.out.println(c.contains("world"));
//        System.out.println(c.contains("javaee"));

        //boolean isempty():判断集合是否为空
//        System.out.println(c.isEmpty());

        //int size():集合的长度,也就是集合中元素的个数
        System.out.println(c.size());

        //输出集合对象
        System.out.println(c);
    }
}
```



### 5.Collection 集合的遍历

![](https://github.com/Continuers/Java/blob/main/picture/170.png)



```java
package com.itrs;

import java.util.ArrayList;
import java.util.Collection;
import java.util.Iterator;

/*
    Iterator:迭代器,集合的专用遍历方式
        Iterator<E> iterator():返回此集合中元素的选代器,通过集合的 iterator()方法得到
        迭代器是通过集合的 iterator()方法得到的,所以我们说它是依赖于集合而存在的
    Iterator 中的常用方法
        E next():返回选代中的下ー个元素
        boolean hasnext():如果迭代具有更多元素,则返回 true
 */
public class ConllectionDemo3 {
    public static void main(String[] args) {
        //创建集合对象
        Collection<String> c = new ArrayList<String>();

        //添加元素
        c.add("hello");
        c.add("world");
        c.add("java");

        //Iterator<E> iterator():返回此集合中元素的选代器,通过集合的 iterator()方法得到
        Iterator<String> it = c.iterator();
        /*
            public Iterator<E> iterator() {
                return new Itr();
            }

            private class Itr implements Iterator<E> {
                ...
            }
         */

        //E next():返回选代中的下ー个元素
        /*
        System.out.println(it.next());
        System.out.println(it.next());
        System.out.println(it.next());
        System.out.println(it.next());  //NoSuchElementException:表示被请求的元素不存在
        */

        //boolean hasnext():如果迭代具有更多元素,则返回 true
        /*if (it.hasNext()){
            System.out.println(it.next());
        }
        if (it.hasNext()){
            System.out.println(it.next());
        }
        if (it.hasNext()){
            System.out.println(it.next());
        }
        if (it.hasNext()){
            System.out.println(it.next());
        }*/

        //用while循环改进判断
        while (it.hasNext()){
//            System.out.println(it.next());
            String s = it.next();
            System.out.println(s);
        }
    }
}
```



### 6.集合的使用步骤

![](https://github.com/Continuers/Java/blob/main/picture/171.png)

![](https://github.com/Continuers/Java/blob/main/picture/172.png)



### 案例：Collection集合存储学生对象并遍历

![](https://github.com/Continuers/Java/blob/main/picture/173.png)

```java
package com.itrs2;

public class Student {
    private String name;
    private int age;

    public Student() {
    }

    public Student(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }
}
```

```java
package com.itrs2;

import java.util.ArrayList;
import java.util.Collection;
import java.util.Iterator;

/*
    需求:
        创建一个存储学生对象的集合,存储3个学生对象,使用程序实现在控制台遍历该集合
    思路:
        1.定义学生类
        2:创建 Collection集合对象
        3:创建学生对象
        4:把学生添加到集合
        5:遍历集合(迭代器方式)
*/
public class CollectionDemo {
    public static void main(String[] args) {
        //创建 Collection集合对象
        Collection<Student> c = new ArrayList<Student>();

        //创建学生对象
        Student s1 = new Student("java", 30);
        Student s2 = new Student("javaee",20);
        Student s3 = new Student("java",25);

        //把学生添加到集合
        c.add(s1);
        c.add(s2);
        c.add(s3);

        //遍历集合(迭代器方式)
        Iterator<Student> it = c.iterator();
        while (it.hasNext()) {
            Student s = it.next();
            System.out.println(s.getName() + "," + s.getAge());
        }
    }
}
```



## 2.List

### 1.List 集合概述和特点

![](https://github.com/Continuers/Java/blob/main/picture/174.png)



```java
package com.itrs;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

/*
    List集合特点
        有序,存储和取出的元素顺序一致
        可重复: 存储的元素可以重复
 */
public class ListDemo {
    public static void main(String[] args) {
        //创建集合对象
        List<String> list = new ArrayList<>();

        //添加元素
        list.add("hello");
        list.add("world");
        list.add("java");
        list.add("javase");

        //输出集合对象
//        System.out.println(list);

        //迭代器的方式遍历
        Iterator<String> it = list.iterator();
        while(it.hasNext()){
            String s = it.next();
            System.out.println(s);
        }
    }
}
```



### 2.List 集合特有方法

![](https://github.com/Continuers/Java/blob/main/picture/178.png)

```java
package com.itrs;

import java.util.ArrayList;
import java.util.List;

/*
    List集合特有方法:
        void add( int index, E element):在此集合中的指定位置插入指定的元素
        E remove( int index):删除指定索引处的元素,返回被删除的元素
        E set( int index, E element):修改指定索引处的元素,返回被修改的元素
        E get( int index):返回指定索引处的元素
 */
public class ListDemo2 {
    public static void main(String[] args) {
        //创建集合对象
        List<String> list = new ArrayList<String>();

        //添加元素
        list.add("hello");
        list.add("world");
        list.add("java");

        //void add( int index, E element):在此集合中的指定位置插入指定的元素
//        list.add(1,"javaee");

        //E remove( int index):删除指定索引处的元素,返回被删除的元素
//        System.out.println(list.remove(1));

        //E set( int index, E element):修改指定索引处的元素,返回被修改的元素
//        System.out.println(list.set(1,"javaee"));

        //E get( int index):返回指定索引处的元素
//        System.out.println(list.get(1));

        //输出集合对象
//        System.out.println(list);

        //遍历集合
//        System.out.println(list.get(0));
//        System.out.println(list.get(1));
//        System.out.println(list.get(2));

        //用 for 循环改进遍历
        for (int i=0;i<list.size();i++){
            String s = list.get(i);
            System.out.println(s);
        }
    }
}
```



### 案例：List 集合存储学生对象并遍历

![](https://github.com/Continuers/Java/blob/main/picture/179.png)

```java
package com.itrs3;

public class Student {
    private String name;
    private int age;

    public Student() {
    }

    public Student(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }
}
```

```java
package com.itrs3;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

/*
    需求:
        创建一个存储学生对象的集合,存储3个学生对象,使用程序实现在控制台遍历该集合
    思路:
        1:定义学生类
        2:创建 List 集合对象
        3:创建学生对象
        4:把学生添加到集合
        5:遍历集合(迭代器方式,for循环方式)
 */
public class ListDemo {
    public static void main(String[] args) {
        //创建List集合对象
        List<Student> list = new ArrayList<>();

        //创建学生对象
        Student s1 = new Student("张杰",35);
        Student s2 = new Student("谢娜",34);
        Student s3 = new Student("迪丽热巴",30);

        //把学生添加到集合
        list.add(s1);
        list.add(s2);
        list.add(s3);

        //遍历集合(迭代器方式,for循环方式)
        //迭代器方式
        Iterator<Student> it = list.iterator();
        while (it.hasNext()){
            Student s = it.next();
            System.out.println(s.getName()+","+s.getAge());
        }
        System.out.println();

        //for 循环方式
        for (int i=0;i<list.size();i++){
            Student s = list.get(i);
            System.out.println(s.getName()+","+s.getAge());
        }
    }
}
```



### 3.并发修改异常

![](https://github.com/Continuers/Java/blob/main/picture/180.png)

```java
package com.itrs4;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

/*
    需求:
        我有一个集合:List<string> List = new Arraylist< string>()
        里面有三个元素:List.add(" hello");tist.ad(" world");ist.ad("java");
        遍历集合,得到每一个元素,看有没有" world"这个元素,如果有,我就添加一个" gavage"元素,请写代码实现

        ConcurrentModificationException:当不允许这样的修改时,可以通过检测到对象的并发修改的方法来抛出此异

 */
public class ListDemo {
    public static void main(String[] args) {
        //创建List集合对象
        List<String> list = new ArrayList<String>();

        //添加到集合
        list.add("hello");
        list.add("world");
        list.add("java");

        //遍历集合,得到每一个元素,看有没有" world"这个元素,如果有,我就添加一个" gavage"元素,请写代码实现
//        Iterator<String> it = list.iterator();
//        while (it.hasNext()){
//            String s = it.next();
//            if (s.equals("world")){
//                list.add("javaee");
//            }
//        }                                 //ConcurrentModificationException

        for (int i=0;i<list.size();i++){
            String s = list.get(i);
            if (s.equals("world")){
                list.add("javaee");
            }
        }

        //输出集合对象
        System.out.println(list);
    }
}
```

```java
/*并发修改异常的源码分析*/

public interface List<E>{
    Iterator<E> iterator();
    boolean add(E e);
}
public abstract class AbstractList<E>{
    protected int modCount = 0;
}

public class ArrayList<E> extends AbstractList<E> implements List<E> {

    public E get(int index) {
        Objects.checkIndex(index, size);
        return elementData(index);
    }

    public boolean add(E e) {
        modCount++;
        add(e, elementData, size);
        return true;
    }

    public Iterator<E> iterator() {
        return new Itr();
    }

    private class Itr implements Iterator<E> {
        int expectedModCount = modCount;
        /*
            modCount:实际修改集合的次数
            expectedModCount:预期修改集合的次数
        */


        public E next() {
            checkForComodification();
            int i = cursor;
            if (i >= size)
                throw new NoSuchElementException();
            Object[] elementData = ArrayList.this.elementData;
            if (i >= elementData.length)
                throw new ConcurrentModificationException();
            cursor = i + 1;
            return (E) elementData[lastRet = i];
        }

        final void checkForComodification() {
            if (modCount != expectedModCount)
                throw new ConcurrentModificationException();
        }
    }
}
```



### 4.Listlterator

![](https://github.com/Continuers/Java/blob/main/picture/181.png)

```java
package com.itrs2;

import java.util.ArrayList;
import java.util.List;
import java.util.ListIterator;

/*
    Listiterator:列表迭代器
        通过List集合的 Listiterator()方法得到,所以说它是List集合特有的迭代器
        用于允许程序员沿任一方向遍历列表的列表的迭代器,在迭代期间修改列表,并获取列表中迭代器的当前位置

    Listiterator中的常用方法
        E next():返回迭代中的下一个元素
        boolean hasnext():如果迭代具有更多元素,则返回true
        E previous():返回列表中的上一个元素
        boolean hasprevious():如果此列表迭代器在相反方向遍历列表时具有更多元素,则返回true
        void add(Ee):将指定的元素插入列表
 */
public class ListIteratorDemo {
    public static void main(String[] args) {
        //创建集合对象
        List<String> list = new ArrayList<>();

        //添加元素
        list.add("hello");
        list.add("world");
        list.add("java");

        //通过List集合的 Listiterator()方法得到
//        ListIterator<String> lit = list.listIterator();
//        while (lit.hasNext()){
//            String s = lit.next();
//            System.out.println(s);      //hello  world  java
//        }
//
//        System.out.println("-------");
//
//        while (lit.hasPrevious()){
//            String s = lit.previous();
//            System.out.println(s);      //java  world  hello
//        }

        //获取列表迭代器
        ListIterator<String> lit = list.listIterator();
        while (lit.hasNext()){
            String s = lit.next();
            if (s.equals("world")){
                lit.add("javaee");
            }
        }

        System.out.println(list);
    }
}
```

```java
/*ListIterator源码分析*/

public interface List<E>{
    Iterator<E> iterator();
    ListIterator<E> listIterator();
}
public abstract class AbstractList<E>{
    protected int modCount = 0;
}

public class ArrayList<E> extends AbstractList<E> implements List<E> {
    public Iterator<E> iterator() {
        return new Itr();
    }

    private class Itr implements Iterator<E> {
        ...
    }

    public ListIterator<E> listIterator() {
        return new ListItr(0);
    }

    private class ListItr extends Itr implements ListIterator<E> {
        public void add(E e) {
            checkForComodification();

            try {
                int i = cursor;
                ArrayList.this.add(i, e);
                cursor = i + 1;
                lastRet = -1;
                expectedModCount = modCount;
            } catch (IndexOutOfBoundsException ex) {
                throw new ConcurrentModificationException();
            }
        }
    }
}
```



### 5.增强 for 循环

![](https://github.com/Continuers/Java/blob/main/picture/182.png)

```java
package com.itrs4;

import java.util.ArrayList;
import java.util.List;

/*
    增强for:简化数组和 Collection集合的遍历
        实现 Iterable接口的类允许其对象成为增强型for语句的目标
        它是JDK5之后出现的,其内部原理是一个 Iteraton迭代器
    格式:
        for(元素数据类型变量名:数组或者 Collection集合){
            //在此处使用变量即可,该变量就是元素
        }
 */
public class ForDemo {
    public static void main(String[] args) {
        int[] arr = {1,2,3,4,5};
        for (int i : arr){
            System.out.println(i);
        }
        System.out.println();

        String[] strArray = {"hello","world","java"};
        for (String s : strArray){
            System.out.println(s);
        }
        System.out.println();

        List<String> list = new ArrayList<String>();
        list.add("hello");
        list.add("world");
        list.add("java");

        for (String s : list){
            System.out.println(s);
        }
        System.out.println();

        //内部原理是一个 Iteraton迭代器
        /*for (String s : list){
            if (s.equals("world")){
                list.add("javaee");    //ConcurrentModificationException
            }
        }*/
    }
}
```



### 案例：List 集合存储学生对象用三种方式遍历

![](https://github.com/Continuers/Java/blob/main/picture/183.png)

```java
package com.itrs5;

public class Student {
    private String name;
    private int age;

    public Student() {
    }

    public Student(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }
}
```

```java
package com.itrs5;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

/*
    需求：
        创建一个存储学生对象的集合,存储3个学生对象,使用程序实现在控制台遍历该集合
    思路:
        1:定义学生类
        2:创建List集合对象
        3:创建学生对象
        4:把学生添加到集合
        5:遍历集合
            迭代器:集合特有的遍历方式
            普通for:带有索引的遍历方式
            增强for:最方便的遍历方式
 */
public class ListDemo {
    public static void main(String[] args) {
        //创建List集合对象
        List<Student> list = new ArrayList<>();

        //创建学生对象
        Student s1 = new Student("java",30);
        Student s2 = new Student("javaee",15);
        Student s3 = new Student("javase",20);

        //把学生添加到集合
        list.add(s1);
        list.add(s2);
        list.add(s3);

        //迭代器:集合特有的遍历方式
        Iterator<Student> it = list.iterator();
        while(it.hasNext()){
            Student s = it.next();
            System.out.println(s.getName()+","+s.getAge());
        }
        System.out.println();

        //普通for:带有索引的遍历方式
        for (int i=0;i<list.size();i++){
            Student s = list.get(i);
            System.out.println(s.getName()+","+s.getAge());
        }
        System.out.println();

        //增强for:最方便的遍历方式
        for (Student s : list){
            System.out.println(s.getName()+","+s.getAge());
        }
    }
}
```



### 6.数据结构

![](https://github.com/Continuers/Java/blob/main/picture/186.png)

### 7.常见数据结构之栈

![](https://github.com/Continuers/Java/blob/main/picture/184.png)

### 8.常见数据结构之队列

![](https://github.com/Continuers/Java/blob/main/picture/185.png)



### 9.常见数据结构之数组

![](https://github.com/Continuers/Java/blob/main/picture/187.png)

### 10.常见数据结构之链表

![](https://github.com/Continuers/Java/blob/main/picture/188.png)

![](https://github.com/Continuers/Java/blob/main/picture/189.png)

![](https://github.com/Continuers/Java/blob/main/picture/190.png)

![](https://github.com/Continuers/Java/blob/main/picture/191.png)

![](https://github.com/Continuers/Java/blob/main/picture/192.png)

![](https://github.com/Continuers/Java/blob/main/picture/193.png)



### 11.List 集合子类特点

![](https://github.com/Continuers/Java/blob/main/picture/194.png)

```java
package com.itrs6;

import java.util.ArrayList;
import java.util.LinkedList;

/*
    List集合常用子类: Arraylist, Linkedlist
        Arraylist:底层数据结构是数组,查询快,增刪幔
        Linkedlist:底层数据结构是链表,查询慢,增删快
    练习：
        分别使用 Arraylist和 linkedlist完成存储字符串并遍历
 */
public class ListDemo {
    public static void main(String[] args) {
        //创建集合对象
        ArrayList<String> array = new ArrayList<String>();

        array.add("hello");
        array.add("world");
        array.add("java");

        //遍历
        for (String s : array){
            System.out.println(s);
        }
        System.out.println();

        LinkedList<String> linkedList = new LinkedList<String>();

        linkedList.add("hello");
        linkedList.add("world");
        linkedList.add("java");

        for (String s : linkedList){
            System.out.println(s);
        }


    }
}
```



### 案例：ArrayList 集合存储学生对象用三种方法遍历



![](https://github.com/Continuers/Java/blob/main/picture/195.png)

```java
package com.itrs6;

public class Student {
    private String name;
    private int age;

    public Student() {
    }

    public Student(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }
}
```

```java
package com.itrs6;

import java.util.ArrayList;
import java.util.Iterator;

/*
    需求:
        创建一个存储学生对象的集合,存储3个学生对象,使用程序实现在控制台遍历该集合
    思路:
        1:定义学生类
        2:创建 Arraylist集合对象
        3:创建学生对象
        4:把学生添加到集合
        5:遍历集合
            迭代器:集合特有的遍历方式
            普通for:带有索引的遍历方式
            增强for:最方便的遍历方式
 */
public class ArrayListDemo {
    public static void main(String[] args) {
        //创建ArrayList 集合对象
        ArrayList<Student> array = new ArrayList<>();

        //创建学生对象
        Student s1 = new Student("java", 30);
        Student s2 = new Student("javaee", 35);
        Student s3 = new Student("javase", 20);

        //把学生添加到集合
        array.add(s1);
        array.add(s2);
        array.add(s3);

        //迭代器:集合特有的遍历方式
        Iterator<Student> it = array.iterator();
        while (it.hasNext()) {
            Student s = it.next();
            System.out.println(s.getName() + "," + s.getAge());
        }
        System.out.println();

        //普通for:带有索引的遍历方式
        for (int i = 0; i < array.size(); i++) {
            Student s = array.get(i);
            System.out.println(s.getName() + "," + s.getAge());
        }
        System.out.println();

        //增强for:最方便的遍历方式
        for (Student s : array) {
            System.out.println(s.getName() + "," + s.getAge());
        }
    }
}
```



### 12.LinkedList 集合的特有功能

![](https://github.com/Continuers/Java/blob/main/picture/196.png)

```java
package com.itrs7;

import java.util.LinkedList;

/*
    Linkedlist集合的特有功能:
        public void addfirst(Ee):在该列表开头插入指定的元素
        public void addlast(Ee):将指定的元素追加到此列表的末尾

        public E getfirst():返回此列表中的第一个元素
        public E getlast():返回此列表中的最后一个元素

        public E removefirst():从此列表中删除并返回第一个元素
        public E removelast():从此列表中删除并返回最后一个元素
 */
public class LinkedListDemo {
    public static void main(String[] args) {
        //创建集合对象
        LinkedList<String> linkedList = new LinkedList<String>();

        linkedList.add("hello");
        linkedList.add("world");
        linkedList.add("java");

//        public void addfirst(Ee):在该列表开头插入指定的元素
//        public void addlast(Ee):将指定的元素追加到此列表的末尾
//        linkedList.addFirst("javase");      //[javase, hello, world, java]
//        linkedList.addLast("javaee");       //[hello, world, java, javaee]

//        public E getfirst():返回此列表中的第一个元素
//        public E getlast():返回此列表中的最后一个元素
//        System.out.println(linkedList.getFirst());  //hello
//        System.out.println(linkedList.getLast());   //java

//        public E removefirst():从此列表中删除并返回第一个元素
//        public E removelast():从此列表中删除并返回最后一个元素
        System.out.println(linkedList.removeFirst());
        System.out.println(linkedList.removeLast());

        System.out.println(linkedList);

    }
}
```



## 3.Set

### 1.Set 集合概述和特点

![](https://github.com/Continuers/Java/blob/main/picture/197.png)

```java
package cn.itrs;

import java.util.HashSet;
import java.util.Set;

/*
    set集合特点
    不包含重复元素的集合
    没有带索引的方法,所以不能使用普通for循环遍历

    HashSet : 对集合的迭代顺序不作任何保证
 */
public class SetDemo {
    public static void main(String[] args) {
        //创建集合对象
        Set<String> set = new HashSet<String>();

        //添加元素
        set.add("hello");
        set.add("world");
        set.add("java");
        //不包含重复元素的集合
        set.add("world");

        //遍历
        for (String s:set){
            System.out.println(s);
        }
    }
}
```

### 2.哈希值

![](https://github.com/Continuers/Java/blob/main/picture/198.png)

```java
package cn.itrs;

public class Student {
    private String name;
    private int age;

    public Student() {
    }

    public Student(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }
}
```

```java
package cn.itrs;

/*
    哈希值:
        是JDk根据对象的地址或者字符串或者数字算出来的int类型的数值

    0bject类中有一个方法可以获取对象的哈希值
        public int hashcode():返回对象的哈希码值
 */
public class HashDemo {
    public static void main(String[] args) {
        //创建学生对象
        Student s1 = new Student("java",30);

        //同一个对象多次调用hashCode()方法返回的哈希值是相同的
        System.out.println(s1.hashCode());  //1239731077
        System.out.println(s1.hashCode());  //1239731077
        System.out.println();

        Student s2 = new Student("java",30);

        //默认情况下,不同对象的哈希值是不相同的
        //通过方法重写，可以实现不同对象的哈希值是相同的
        System.out.println(s2.hashCode());  //557041912
        System.out.println();

        System.out.println("hello".hashCode()); //99162322
        System.out.println("world".hashCode()); //113318802
        System.out.println("java".hashCode());  //3254818

        System.out.println("world".hashCode()); //113318802
        System.out.println();

        System.out.println("北斗".hashCode());
        System.out.println("东风".hashCode());

    }
}
```



### 3.HashSet 集合概述和特点

```java
package cn.itrs;

import java.util.HashSet;

/*
    HashSet集合特点
        1:底层数据结构是哈希表
        2:对集合的迭代顺序不作任何保证,也就是说不保证存储和取出的元素顺序一致
        3:没有带索引的方法,所以不能使用普通 for循环遍历
        4:由于是 Set 集合,所以是不包含重复元素的集合
 */
public class HashSetDemo {
    public static void main(String[] args) {
        //创建集合对象
        HashSet<String> hs = new HashSet<String>();

        //添加元素
        hs.add("hello");
        hs.add("world");
        hs.add("java");

        hs.add("world");

        //遍历
        for (String s : hs){
            System.out.println(s);
        }
    }
}
```



### 4.HashSet 集合保证元素唯一性源码分析

![](https://github.com/Continuers/Java/blob/main/picture/199.png)

```java
//创建集合对象
HashSet<String> hs = new HashSet<String>();

//添加元素
hs.add("hello");
hs.add("world");
hs.add("java");
----------------------------------------------------------

public boolean add(E e) {
    return map.put(e, PRESENT)==null;
}

static final int hash(Object key) {
    int h;
    return (key == null) ? 0 : (h = key.hashCode()) ^ (h >>> 16);
}

public V put(K key, V value) {
    return putVal(hash(key), key, value, false, true);
}

//hash值和元素的hashCode()方法相关
final V putVal(int hash, K key, V value, boolean onlyIfAbsent,
               boolean evict) {
    Node<K,V>[] tab; Node<K,V> p; int n, i;

    //如果哈希表未初始化，就对其进行初始化
    if ((tab = table) == null || (n = tab.length) == 0)
        n = (tab = resize()).length;

    //根据对象的哈希值计算对象的存储位置，如果该位置没用元素，就存储元素
    if ((p = tab[i = (n - 1) & hash]) == null)
        tab[i] = newNode(hash, key, value, null);
    else {
        Node<K,V> e; K k;
        /*
            存入的元素和以前的元素比较哈希值
                如果哈希值不同，会继续向下执行，把元素添加到集合
                如果哈希值相同，会调用对象的equals()方法比较
                    如果返回false，会继续向下执行，把元素添加到集合
                    如果返回true，说明元素重复，不存储
        */
        if (p.hash == hash &&
            ((k = p.key) == key || (key != null && key.equals(k))))
            e = p;
        else if (p instanceof TreeNode)
            e = ((TreeNode<K,V>)p).putTreeVal(this, tab, hash, key, value);
        else {
            for (int binCount = 0; ; ++binCount) {
                if ((e = p.next) == null) {
                    p.next = newNode(hash, key, value, null);
                    if (binCount >= TREEIFY_THRESHOLD - 1) // -1 for 1st
                        treeifyBin(tab, hash);
                    break;
                }
                if (e.hash == hash &&
                    ((k = e.key) == key || (key != null && key.equals(k))))
                    break;
                p = e;
            }
        }
        if (e != null) { // existing mapping for key
            V oldValue = e.value;
            if (!onlyIfAbsent || oldValue == null)
                e.value = value;
            afterNodeAccess(e);
            return oldValue;
        }
    }
    ++modCount;
    if (++size > threshold)
        resize();
    afterNodeInsertion(evict);
    return null;
}
```

```java
package cn.itrs;

import java.util.HashSet;

/*
    HashSet集合特点
        1:底层数据结构是哈希表
        2:对集合的迭代顺序不作任何保证,也就是说不保证存储和取出的元素顺序一致
        3:没有带索引的方法,所以不能使用普通 for循环遍历
        4:由于是 Set 集合,所以是不包含重复元素的集合
 */
public class HashSetDemo {
    public static void main(String[] args) {
        //创建集合对象
        HashSet<String> hs = new HashSet<String>();

        //添加元素
        hs.add("hello");
        hs.add("world");
        hs.add("java");

        hs.add("world");

        //遍历
        for (String s : hs){
            System.out.println(s);
        }
    }
}
```



### 5.常用数据结构值哈希表

![](https://github.com/Continuers/Java/blob/main/picture/200.png)



### 案例：HashSet 集合存储学生对象并遍历


![](https://github.com/Continuers/Java/blob/main/picture/201.png)

```java
package cn.itrs;

public class Student {
    private String name;
    private int age;

    public Student() {
    }

    public Student(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;

        Student student = (Student) o;

        if (age != student.age) return false;
        return name != null ? name.equals(student.name) : student.name == null;
    }

    @Override
    public int hashCode() {
        int result = name != null ? name.hashCode() : 0;
        result = 31 * result + age;
        return result;
    }
}
```

```java
package cn.itrs;

import java.util.HashSet;

/*
    需求:
        创建一个存储学生对象的集合,存储3个学生对象,使用程序实现在控制台遍历该集合
        要求:学生对象的成员变量值相同,我们就认为是同一个对象
    思路：
        1:定义学生类
        2:创建 Hashset集合对象
        3:创建学生对象
        4:把学生添加到集合
        5:遍历集合(增强for)
 */
public class HashSetDemo2 {
    public static void main(String[] args) {
        //创建 Hashset集合对象
        HashSet<Student> hs = new HashSet<Student>();

        //创建学生对象
        Student s1 = new Student("java",30);
        Student s2 = new Student("javaee",40);
        Student s3 = new Student("javase",20);

        Student s4 = new Student("javase",20);

        //把学生添加到集合
        hs.add(s1);
        hs.add(s2);
        hs.add(s3);
        hs.add(s4);

        //遍历集合(增强for)
        for (Student s : hs){
            System.out.println(s.getName()+","+s.getAge());
        }
    }
}
```

### 6.LinkedHashSet集合概述和特点


![](https://github.com/Continuers/Java/blob/main/picture/202.png)

```java
package cn.itrs;

import java.util.LinkedHashSet;

/*
    Linkedhashset集合特点
        1:哈希表和链表实现的Set接口,具有可预测的迭代次序
        2:由链表保证元素有序,也就是说元素的存储和取出顺序是一致的
        3:由哈希表保证元素唯一,也就是说没有重复的元素
 */
public class LinkedHashSetDemo {
    public static void main(String[] args) {
      //创建集合对象
        LinkedHashSet<String> linkedHashSet = new LinkedHashSet<String>();

        //添加元素
        linkedHashSet.add("hello");
        linkedHashSet.add("world");
        linkedHashSet.add("java");

        linkedHashSet.add("world");

        //遍历集合
        for (String s : linkedHashSet){
            System.out.println(s);
        }
    }
}
```



### 7.TreeSet 集合概述和特点

![](https://github.com/Continuers/Java/blob/main/picture/203.png)

```java
package cn.itrs;

import java.util.TreeSet;
/*
    Treeset集合特点
        1:元素有序,这里的顺序不是指存储和取岀的顺序,而是按照一定的规则进行排序,具体排序方式取决于构造方法
            Treeset():根据其元素的自然排序进行排序
            Treeset( Comparator comparator):根据指定的比较器进行排序
        2:没有带索引的方法,所以不能使用普通fo循环遍历
        3:由于是set集合,所以不包含重复元素的集合
 */
public class TreeSetDemo {
    public static void main(String[] args) {
        TreeSet<Integer> ts = new TreeSet<Integer>();

        ts.add(10);
        ts.add(40);
        ts.add(50);
        ts.add(30);
        ts.add(20);

        ts.add(30);

        //遍历集合
        for (Integer i : ts) {
            System.out.println(i);    //10  20  30  40  50
        }
    }
}
```



### 8.自然排序 Comparable 的使用

![](https://github.com/Continuers/Java/blob/main/picture/204.png)

```java
package cn.itrs;

public class Student implements Comparable<Student> {
    private String name;
    private int age;

    public Student() {
    }

    public Student(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    @Override
    public int compareTo(Student s) {
//        return 0;
//        return 1;     //升序
//        return -1;      //降序

        //按照年龄从小到大排序
        int num = this.age - s.age;  //升序
//        int num = s.age - this.age;  //降序
        int num2 = num == 0?this.name.compareTo(s.name):num;
        return num2;
    }
}
```

```java
package cn.itrs;

import java.util.TreeSet;

/*
    存储学生对象并遍历,创建集合使用无参构造方法
    要求:按照年龄从小到大排序,年齡相同时,按照姓名的字母顺序排序
 */
public class TreeSetDemo2 {
    public static void main(String[] args) {
        TreeSet<Student> ts = new TreeSet<Student>();

        Student s1 = new Student("java",10);
        Student s2 = new Student("javaee",20);
        Student s3 = new Student("javase",30);
        Student s4 = new Student("javaweb",40);

        Student s5 = new Student("spring",40);
        Student s6 = new Student("spring",40);

        ts.add(s1);
        ts.add(s2);
        ts.add(s3);
        ts.add(s4);
        ts.add(s5);
        ts.add(s6);

        for (Student s : ts){
            System.out.println(s.getName()+","+s.getAge());
        }


    }
}
```



```java
/*
    java,10
    javaee,20
    javase,30
    javaweb,40
    spring,40
*/
```



### 9.比较器排序 Comparator 的使用

![](https://github.com/Continuers/Java/blob/main/picture/205.png)

```java
package com.itrs8;

public class Student {
    private String name;
    private int age;

    public Student() {
    }

    public Student(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }
}
```

```java
package com.itrs8;

import java.util.Comparator;
import java.util.TreeSet;

/*
    存储学生对象并遍历,创建 Treeset集合使用带参构造方法
    要求:按照年龄从小到大排序,年龄相同时,按照姓名的字母顺序排序
 */
public class TreeSetDemo {
    public static void main(String[] args) {
        TreeSet<Student> ts = new TreeSet<Student>(new Comparator<Student>() {
            @Override
            public int compare(Student s1, Student s2) {
                //this.age - s.age
                //s1,s2
                int num = s1.getAge() - s2.getAge();
                int num2 = num == 0?s1.getName().compareTo(s2.getName()):num;
                return num2;
            }
        });

        Student s1 = new Student("java",10);
        Student s2 = new Student("javaee",20);
        Student s3 = new Student("javase",30);
        Student s4 = new Student("javaweb",40);

        Student s5 = new Student("spring",40);
        Student s6 = new Student("spring",40);

        ts.add(s1);
        ts.add(s2);
        ts.add(s3);
        ts.add(s4);
        ts.add(s5);
        ts.add(s6);

        for (Student s : ts){
            System.out.println(s.getName()+","+s.getAge());
        }

    }

}
```



### 案例：成绩排序

![](https://github.com/Continuers/Java/blob/main/picture/206.png)

```java
package com.itrs9;

public class Student {
    private String name;
    private int chinese;
    private int math;

    public Student() {
    }

    public Student(String name, int chinese, int math) {
        this.name = name;
        this.chinese = chinese;
        this.math = math;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getChinese() {
        return chinese;
    }

    public void setChinese(int chinese) {
        this.chinese = chinese;
    }

    public int getMath() {
        return math;
    }

    public void setMath(int math) {
        this.math = math;
    }

    public int getSum(){
        return this.chinese+this.math;
    }
}
```

```java
package com.itrs9;

import java.util.Comparator;
import java.util.TreeSet;

/*
    需求:
        用 TreeSet集合存储多个学生信息(姓名,语文成绩,数学成绩),并遍历该集合
        要求:按照总分从高到低出现
    思路:
        ①定义学生类
        ②创建 Treeset集合对象,通过比较器排序进行排序
        ③创建学生对象
        ④把学生对象添加到集合
        ⑤遍历集合
 */
public class TreeSetDemo {
    public static void main(String[] args) {
        //创建 Treeset集合对象,通过比较器排序进行排序
        TreeSet<Student> ts = new TreeSet<Student>(new Comparator<Student>() {
            @Override
            public int compare(Student s1, Student s2) {
//                int num = (s2.getChinese() + s2.getMath()) - (s1.getChinese() + s1.getMath());
                //主要条件
                int num = s2.getSum() - s1.getSum();
                //次要条件
                int num2 = num == 0 ? s1.getChinese() - s2.getChinese() : num;
                int num3 = num2 == 0 ? s1.getName().compareTo(s2.getName()) : num2;
                return num3;
            }
        });

        //创建学生对象
        Student s1 = new Student("java", 100, 98);
        Student s2 = new Student("javaweb", 99, 97);
        Student s3 = new Student("javase", 95, 96);
        Student s4 = new Student("javaee", 90, 99);
        Student s5 = new Student("springboot", 99, 98);

        Student s6 = new Student("springcloud", 98, 99);
        Student s7 = new Student("spring", 98, 99);

        //把学生对象添加到集合
        ts.add(s1);
        ts.add(s2);
        ts.add(s3);
        ts.add(s4);
        ts.add(s5);
        ts.add(s6);
        ts.add(s7);

        //遍历集合
        for (Student s : ts) {
            System.out.println(s.getName() + "：" + s.getChinese() + "+" + s.getMath() + "=" + s.getSum());
        }
    }
}

/*
	java：100+98=198
    spring：98+99=197
    springcloud：98+99=197
    springboot：99+98=197
    javaweb：99+97=196
    javase：95+96=191
    javaee：90+99=189
*/
```



### 案例：不重复的随机数

![](https://github.com/Continuers/Java/blob/main/picture/207.png)

```java
package com.itrs9;

import java.util.HashSet;
import java.util.Random;
import java.util.Set;
import java.util.TreeSet;

/*
    需求：
        編写一个程序,获取 10 个 1-20 之间的随机数,要求随机数不能重复,并在控制台输出
    思路:
        1:创建Set集合对象
        2:创建随机数对象
        3:判断集合的长度是不是小于10
            是:产生一个随机数,添加到集合
            回到3继续
        4:遍历集合
 */
public class SetDemo {
    public static void main(String[] args) {
        //创建Set集合对象
//        Set<Integer> set = new HashSet<Integer>();    //无序
        Set<Integer> set = new TreeSet<Integer>();      //顺序

        //创建随机数对象
        Random r = new Random();

        //判断集合的长度是不是小于10
        while (set.size()<10){
            //产生一个随机数,添加到集合
            int number = r.nextInt(20)+1;
            set.add(number);
        }

        //遍历集合
        for (Integer i : set){
            System.out.println(i);
        }
    }
}
```



## 4.泛型

### 1.泛型概述

![](https://github.com/Continuers/Java/blob/main/picture/208.png)

```java
package com.itrs10;

import java.util.ArrayList;
import java.util.Collection;
import java.util.Iterator;

/*
    需求： Collection 集合存储字符串并遍历
 */
public class GenericDemo {
    public static void main(String[] args) {
        //创建集合对象
//        Collection c = new ArrayList();
        Collection<String> c = new ArrayList<String>();

        //添加元素
        c.add("hello");
        c.add("java");
        c.add("world");

//        c.add(100);

        //遍历集合
//        Iterator it = c.iterator();
        Iterator<String> it = c.iterator();
        while (it.hasNext()){
//            Object obj = it.next();
//            System.out.println(obj);
//            String s = (String)it.next();
            String s = it.next();
            System.out.println(s);
        }
    }
}
```



### 2.泛型类

```java
package cn.itrs2;

public class Student {
    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}
```

```java
package cn.itrs2;

public class Teacher {
    private Integer age;

    public Integer getAge() {
        return age;
    }

    public void setAge(Integer age) {
        this.age = age;
    }
}
```

```java
package cn.itrs2;
/*
    泛型类
 */
public class Generic<T> {
    private T t;

    public T getT() {
        return t;
    }

    public void setT(T t) {
        this.t = t;
    }
}
```

```java
package cn.itrs2;

/*
    测试类
 */
public class GenericDemo {
    public static void main(String[] args) {
        Student s = new Student();
        s.setName("java");
        System.out.println(s.getName());

        Teacher t = new Teacher();
        t.setAge(30);
//        t.setAge("30");
        System.out.println(t.getAge());
        System.out.println();

        Generic<String> g1 = new Generic<String>();
        g1.setT("javase");
        System.out.println(g1.getT());

        Generic<Integer> g2 = new Generic<Integer>();
        g2.setT(20);
        System.out.println(g2.getT());

        Generic<Boolean> g3 = new Generic<Boolean>();
        g3.setT(true);
        System.out.println(g3.getT());

    }
}
```

### 3.泛型方法

```java
package cn.itrs3;
/*
public class Generic {
    public void show(String s){
        System.out.println(s);
    }
    public void show(Integer i){
        System.out.println(i);
    }
    public void show(Boolean b){
        System.out.println(b);
    }
}
*/

//泛型类改进
//public class Generic<T> {
//    public void show(T t){
//        System.out.println(t);
//    }
//}

//泛型方法改进
public class Generic{
    public <T> void show(T t){
        System.out.println(t);
    }
}
```

```java
package cn.itrs3;

/*
    测试类
 */
public class GenericDemo {
    public static void main(String[] args) {
//        Generic g = new Generic();
//        g.show("java");
//        g.show(true);
//        g.show(100);

//        Generic<String> g1 = new Generic<String>();
//        g1.show("java");
//
//        Generic<Integer> g2 = new Generic<Integer>();
//        g2.show(100);
//
//        Generic<Boolean> g3 = new Generic<Boolean>();
//        g3.show(true);

        //泛型方法的使用
        Generic g = new Generic();
        g.show("java");
        g.show(100);
        g.show(true);
        g.show(3.14);
    }
}
```



### 4.泛型接口

![](https://github.com/Continuers/Java/blob/main/picture/209.png)

```java
package cn.itrs4;
/*
    接口
 */
public interface Generic<T> {
    void show(T t);
}
```

```java
package cn.itrs4;

public class GenericImpl<T> implements Generic<T> {
    @Override
    public void show(T t) {
        System.out.println(t);
    }
}
```

```java
package cn.itrs4;

/*
    测试类
 */
public class GenericDemo {
    public static void main(String[] args) {
        Generic<String> g1 = new GenericImpl<>();
        g1.show("spring");

        Generic<Integer> g2 = new GenericImpl<Integer>();
            g2.show(100);
    }
}
```



### 5.类型通配符

![](https://github.com/Continuers/Java/blob/main/picture/210.png)

```java
package cn.itrs5;

import java.util.ArrayList;
import java.util.List;

/*
    类型通配符:<?>
        List<?>:表示元素类型未知的 List,它的元素可以匹配任何的类型
        这种带通配符的 List 仅表示它是各种泛型 List 的父类,并不能把元素添加到其中

    类型通配符上限:<? extends类型>
        List<? extends Number>:它表示的类型是 Numbel或者其子类型

    类型通配符下限:<? super类型>
        List<? super Number>:它表示的类型是 Number或者其父类型
 */
public class DenericDemo {
    public static void main(String[] args) {
       //类型通配符:<?>
        List<?> list1 = new ArrayList<Object>();
        List<?> list2 = new ArrayList<Number>();
        List<?> list3 = new ArrayList<Integer>();
        System.out.println();

        //类型通配符上限:<? extends类型>
//        List<? extends Number> list4 = new ArrayList<Object>();
        List<? extends Number> list5 = new ArrayList<Number>();
        List<? extends Number> list6 = new ArrayList<Integer>();
        System.out.println();

        //类型通配符下限:<? super类型>
        List<? super Number> list7 = new ArrayList<Object>();
        List<? super Number> list8 = new ArrayList<Number>();
//        List<? super Number> list9 = new ArrayList<Integer>();
    }
}
```



### 6.可变参数

![](https://github.com/Continuers/Java/blob/main/picture/211.png)

```java
package cn.itrs5;

public class ArgsDemo {
    public static void main(String[] args) {
        System.out.println(sum(10, 20));
        System.out.println(sum(10, 20, 30));
        System.out.println(sum(10, 20, 30, 40));

        System.out.println(sum(10, 20, 30, 40, 50));
        System.out.println(sum(10, 20, 30, 40, 50, 60));
        System.out.println(sum(10, 20, 30, 40, 50, 60, 70));
    }

//    public static int sum(int b,int... a) {
//        return 0;
//    }
    
    public static int sum(int... a) {
//        return 0;
        int sum = 0;
        for (int i : a) {
            sum += i;
        }
        return sum;
    }

//    public static int sum(int a, int b) {
//        return a + b;
//    }
//
//    public static int sum(int a, int b, int c) {
//        return a + b + c;
//    }
//
//    public static int sum(int a, int b, int c, int d) {
//        return a + b + c + d;
//    }
}
```



### 7.可变参数的使用

![](https://github.com/Continuers/Java/blob/main/picture/212.png)

```java
package cn.itrs5;

import java.sql.ClientInfoStatus;
import java.util.Arrays;
import java.util.List;
import java.util.Set;

/*
    Arrays 工具类中有一个静态方法：
        public static <T> List<T> asList (T... a): 返回由指定数组支持的固定大小的列表

    List接口中有一个静态方法：
        public static <E> List<E> of (E... elements): 返回包含任意数量元素的不可变列表

    Set 接口中有一个静态方法：
        public static <E> Set<E> of (E... elements): 返回一个包含任意数量元素的不可变集合
 */
public class ArgsDemo2 {
    public static void main(String[] args) {
        /*//public static <T> List<T> asList (T... a): 返回由指定数组支持的固定大小的列表
        List<String> list = Arrays.asList("hello", "java", "world");
//        list.add("javaee");     //UnsupportedOperationException
//        list.remove("world");   //UnsupportedOperationException
        list.set(1,"javaee");     //[hello, javaee, world]

        System.out.println(list);*/

        //public static <E> List<E> of (E... elements): 返回包含任意数量元素的不可变列表
/*        List<String> list = List.of("hello", "world", "java");
//        list.add("javaee");     //UnsupportedOperationException
//        list.remove("world");   //UnsupportedOperationException
//        list.set(1,"javaee");     ////UnsupportedOperationException

        System.out.println(list);*/

        //public static <E> Set<E> of (E... elements): 返回一个包含任意数量元素的不可变集合
//        Set<String> set = Set.of("hello", "java", "world","world"); //IllegalArgumentException
        Set<String> set = Set.of("hello", "java", "world");

//        set.add("javaee");      //UnsupportedOperationException
//        set.remove("world"); //UnsupportedOperationException
        
        System.out.println(set);
    }
}
```



## 5.Map

### 1.Map 集合概述和使用

![](https://github.com/Continuers/Java/blob/main/picture/213.png)

```java
package cn.itrs5;

import java.util.HashMap;
import java.util.Map;

/*
    Map集合概述
        Interface Map<K,V>  K:键的类型;  v:值的类型
        将键映射到值的对象;不能包含重复的键;每个键可以映射到最多一个值

    创建Map集合的对象
        多态的方式
        具体的实现类 HashMap
 */
public class MapDemo {
    public static void main(String[] args) {
        //创建集合对象
        Map<String,String> map = new HashMap<String,String>();

        //V put (K key, V value) 将指定的值与该映射中的指定键相关联
        map.put("itrs001","java");
        map.put("itrs002","javaee");
        map.put("itrs003","javase");
        map.put("itrs003","javaweb");
        //{itrs003=javaweb, itrs002=javaee, itrs001=java}

        //输出集合对象
        System.out.println(map);
    }
}
```



### 2.Map 集合的基本功能

![](https://github.com/Continuers/Java/blob/main/picture/214.png)

```java
package cn.itrs5;

import java.util.HashMap;
import java.util.Map;

/*
    Map集合的基本功能:
        V put(K key, V value):添加元素
        V remove( Object key):根据键删除键值对元素
        void clear():移除所有的键值对元素
        boolean containskey( Object key):判断集合是否包含指定的键
        boolean containsvalue( Object value):判断集合是否包含指定的值
        boolean isempty():判断集合是否为空
        int size():集合的长度,也就是集合中键值对的个数
 */
public class MapDemo2 {
    public static void main(String[] args) {
        //创建集合对象
        Map<String,String> map = new HashMap<String,String>();

        //V put(K key, V value):添加元素
        map.put("杨过","小龙女");
        map.put("郭靖","黄蓉");

        //V remove( Object key):根据键删除键值对元素
//        System.out.println(map.remove("郭靖"));
//        System.out.println(map.remove("郭襄"));

        //void clear():移除所有的键值对元素
//        map.clear();

        //boolean containskey( Object key):判断集合是否包含指定的键
//        System.out.println(map.containsKey("郭靖"));
//        System.out.println(map.containsKey("郭襄"));

        //boolean containsvalue( Object value):判断集合是否包含指定的值
//        System.out.println(map.containsValue("黄蓉"));    //V true    K false
//        System.out.println(map.containsValue("郭襄"));

        //boolean isEmpty():判断集合是否为空
//        System.out.println(map.isEmpty());

        //int size():集合的长度,也就是集合中键值对的个数
        System.out.println(map.size());

        //输出集合对象
        System.out.println(map);

    }
}
```



### 3.Map集合的获取功能

![](https://github.com/Continuers/Java/blob/main/picture/215.png)

```java
package cn.itrs5;

import java.util.Collection;
import java.util.HashMap;
import java.util.Map;
import java.util.Set;

/*
    Map集合的获取功能:
    V get( Object key):根据键获取值
    Set<K> keyset():获取所有键的集合
    Collection<V> values():获取所有值的集合
 */
public class MapDemo3 {
    public static void main(String[] args) {
        //创建集合对象
        Map<String,String> map = new HashMap<String,String>();

        //添加元素
        map.put("杨过","小龙女");
        map.put("郭靖","黄蓉");

        //V get( Object key):根据键获取值
//        System.out.println(map.get("杨过"));  //小龙女
//        System.out.println(map.get("郭襄"));  //null

        //Set<K> keySet():获取所有键的集合
//        Set<String> keySet = map.keySet();
//        for (String key : keySet){
//            System.out.println(key);      //杨过    郭靖
//        }

        /* Collection<V> values():获取所有值的集合 */
        Collection<String> values = map.values();
        for (String value : values){
            System.out.println(value);    //小龙女   黄蓉
        }

    }
}
```



### 4.Map集合的遍历①

![](https://github.com/Continuers/Java/blob/main/picture/216.png)

```java
package cn.itrs5;

import java.util.HashMap;
import java.util.Map;
import java.util.Set;

/*
    Map集合的遍历(方式 1):
        1:获取所有键的集合。用 keyset()方法实现
        2:遍历键的集合,获取到每一个键。用增强for实现
        3:根据键去找值。用get( Object key)方法实现
 */
public class MapDemo4 {
    public static void main(String[] args) {
        //创建集合对象
        Map<String,String> map = new HashMap<String, String>();

        //添加元素
        map.put("杨过","小龙女");
        map.put("郭靖","黄蓉");

        //获取所有键的集合。用 keyset()方法实现
        Set<String> keySet = map.keySet();
        //遍历键的集合,获取到每一个键。用增强 for实现
        for (String key : keySet){
            //根据键去找值。用get( Object key)方法实现
            String value = map.get(key);
            System.out.println(key+","+value);
        }
    }
}
```

### 5.Map 集合的遍历②

![](https://github.com/Continuers/Java/blob/main/picture/217.png)

```java
package cn.itrs5;

import java.util.HashMap;
import java.util.Map;
import java.util.Set;

/*
    Map集合的遍历(方式2)
        1:获取所有键值对对象的集合
            Set<Map. Entry<K,V>> entrySet():获取所有键值对对象的集合
        2:遍历键值对对象的集合,得到每一个键值对对象
            用增强for实现,得到每一个Map. Entry
        3:根据键值对对象获取键和值
            用 getkey()得到键
            用 getvalue()得到值
 */
public class MapDemo5 {
    public static void main(String[] args) {
        //创建集合对象
        Map<String, String> map = new HashMap<String, String>();

        //添加元素
        map.put("杨过", "小龙女");
        map.put("郭靖", "黄蓉");

        //获取所有键值对对象的集合
        Set<Map.Entry<String, String>> entrySet = map.entrySet();
        //遍历键值对对象的集合,得到每一个键值对对象
        for (Map.Entry<String, String> me : entrySet) {
            //根据键值对对象获取键和值
            String key = me.getKey();
            String value = me.getValue();
            System.out.println(key + "," + value);
        }
    }
}
```



### 案例：HashMap 集合存储学生对象并遍历

![](https://github.com/Continuers/Java/blob/main/picture/218.png)

```java
package cn.itrs6;

import java.util.HashMap;
import java.util.Map;
import java.util.Set;

/*
    需求：
        创建一个 Hashmap集合,键是学号( String),值是学生对象( Student)。存储三个键值对元素,并遍历
    思路：
        1:定义学生类
        2:创建 HashMap集合对象
        3:创建学生对象
        4:把学生添加到集合
        5:遍历集合
            方式1:键找值
            方式2:键值对对象找键和值
 */
public class HashMapDemo {
    public static void main(String[] args) {
        //创建 HashMap集合对象
        HashMap<String, Student> hm = new HashMap<String, Student>();

        //创建学生对象
        Student s1 = new Student("java", 100);
        Student s2 = new Student("javaweb", 99);
        Student s3 = new Student("javaee", 98);

        //把学生添加到集合
        hm.put("itrs001", s1);
        hm.put("itrs002", s2);
        hm.put("itrs003", s3);

        //方式1:键找值
        Set<String> keySet = hm.keySet();
        for (String key : keySet) {
            Student value = hm.get(key);
            System.out.println(key + "," + value.getName() + "," + value.getAge());
        }
        System.out.println();
        //方式2:键值对对象找键和值
        Set<Map.Entry<String, Student>> entrySet = hm.entrySet();
        for (Map.Entry<String, Student> me : entrySet) {
            String key = me.getKey();
            Student value = me.getValue();
            System.out.println(key + "," + value.getName() + "," + value.getAge());
        }
    }
}
```

### 案例：HashMap 集合存储学生对象并遍历2

![](https://github.com/Continuers/Java/blob/main/picture/219.png)

```java
package cn.itrs7;

public class Student {
    private String name;
    private int age;

    public Student() {
    }

    public Student(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;

        Student student = (Student) o;

        if (age != student.age) return false;
        return name != null ? name.equals(student.name) : student.name == null;
    }

    @Override
    public int hashCode() {
        int result = name != null ? name.hashCode() : 0;
        result = 31 * result + age;
        return result;
    }
}
```

```java
package cn.itrs7;

import java.util.HashMap;
import java.util.Set;

/*
    需求：
        创建一个 Hashmap.集合,键是学生对象( Student),值是居住地( String)。存储多个键值对元素,并遍历。
        要求保证键的唯一性:如果学生对象的成员变量值相同,我们就认为是同一个对象
    思路：
        1:定义学生类
        2:创建 Hashmap集合对象
        3:创建学生对象
        4:把学生添加到集合
        5:遍历集合
        6:在学生类中重写两个方法
            hashcode()
            equals()
 */
public class HashMapDemo {
    public static void main(String[] args) {
        //创建HashMap集合对象
        HashMap<Student,String> hm = new HashMap<Student,String>();

        //创建学生对象
        Student s1 = new Student("java", 100);
        Student s2 = new Student("javaweb", 99);
        Student s3 = new Student("javaee", 98);
        Student s4 = new Student("javaee", 98);

        //把学生添加到集合
        hm.put( s1,"广州");
        hm.put( s2,"上海");
        hm.put( s3,"北京");
        hm.put( s4,"深圳");

        //遍历集合
        Set<Student> keySet = hm.keySet();
        for (Student key : keySet){
            String value = hm.get(key);
            System.out.println(key.getName()+","+key.getAge()+","+value);
        }
    }
}
```



### 案例：ArrayList 集合存储 HashMap 元素并遍历

![](https://github.com/Continuers/Java/blob/main/picture/220.png)

```java
package cn.itrs7;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.Set;

/*
    需求：
        创建一个 Arraylist集合,存储三个元素,每一个元素都是 Hashmap,每一个 Hashmap的键和值都是 String,并遍历
    思路:
        1:创建 Arraylist集合
        2:创建 Hashmap集合,并添加键值对元素
        3:把 Hashmap作为元素添加到 Arraylist集合
        4:遍历 Arraylist集合

    给出如下的数据：
        第一个 Hashmap集合的元素
            孙策    大乔
            周瑜    小乔
        第二个 Hashmap集合的元素
            郭靖    黄蓉
            杨过    小龙女
        第三个 Hashmap集合的元素
            令狐冲  任盈盈
            林平之  岳灵珊
 */
public class ArrayListIncludeHashMapDemo {
    public static void main(String[] args) {
        //创建ArrayList集合
        ArrayList<HashMap<String, String>> array = new ArrayList<HashMap<String, String>>();

        //创建HashMap集合，并添加键值对元素
        HashMap<String, String> hm1 = new HashMap<String, String>();
        hm1.put("孙策", "大乔");
        hm1.put("周瑜","小乔");
        //把 Hashmap作为元素添加到 Arraylist集合
        array.add(hm1);

        //创建HashMap集合，并添加键值对元素
        HashMap<String, String> hm2 = new HashMap<String, String>();
        hm2.put("郭靖","黄蓉");
        hm2.put("杨过","小龙女");
        //把 Hashmap作为元素添加到 Arraylist集合
        array.add(hm2);

        //创建HashMap集合，并添加键值对元素
        HashMap<String, String> hm3 = new HashMap<String, String>();
        hm3.put("令狐冲","任盈盈");
        hm3.put("林平之","岳灵珊");
        //把 Hashmap作为元素添加到 Arraylist集合
        array.add(hm3);

        //遍历 Arraylist集合
        for (HashMap<String, String> hm : array){
            Set<String> keySet = hm.keySet();
            for (String key : keySet){
                String value = hm.get(key);
                System.out.println(key+","+value);
            }
        }

    }
}
```



### 案例：HashMap 集合存储 ArrayList 元素并遍历

![](https://github.com/Continuers/Java/blob/main/picture/221.png)

```java
package cn.itrs7;

import javax.swing.*;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Set;

/*
    需求:
        创建一个 HashMap集合,存储三个键值对元素,每一个键值对元素的键是 String,值是 Arraylist,每一个 Arraylist的元素是 String,并遍历
    思路:
        1:创建 HashMap集合
        2:创建 Arraylist集合,并添加元素
        3:把 Arraylist作为元素添加到 HashMap集合
        4:遍历 HashMap集合

    给出如下的数据:
        第一个 Arraylist集合的元素:(三国演义)
            诸葛亮 赵云
        第二个 Arraylist集合的元素:(西游记)
            唐僧 孙悟空
        第三个 Array ist集合的元素:(水浒传)
            武松 鲁智深
 */
public class HashMapIncludeArrayListDemo {
    public static void main(String[] args) {
        //创建 HashMap集合
        HashMap<String, ArrayList<String>> hm = new HashMap<String, ArrayList<String>>();

        //创建 Arraylist集合,并添加元素
        ArrayList<String> sgyy = new ArrayList<String>();
        sgyy.add("诸葛亮");
        sgyy.add("赵云");
        //把 Arraylist作为元素添加到 HashMap集合
        hm.put("三国演义", sgyy);

        //创建 Arraylist集合,并添加元素
        ArrayList<String> xyj = new ArrayList<String>();
        xyj.add("唐僧");
        xyj.add("孙悟空");
        //把 Arraylist作为元素添加到 HashMap集合
        hm.put("西游记", xyj);

        //创建 Arraylist集合,并添加元素
        ArrayList<String> shz = new ArrayList<String>();
        shz.add("武松");
        shz.add("鲁智深");
        //把 Arraylist作为元素添加到 HashMap集合
        hm.put("水浒传", shz);

        //遍历 HashMap集合
        Set<String> keySet = hm.keySet();
        for (String key : keySet) {
            System.out.println(key);
            ArrayList<String> value = hm.get(key);
            for (String s : value) {
                System.out.println("\t" + s);
            }
        }
    }
}
```



### 案例：统计字符串中每个字符出现的次数

![](https://github.com/Continuers/Java/blob/main/picture/222.png)

![](https://github.com/Continuers/Java/blob/main/picture/223.png)

```java
package cn.itrs8;

import java.util.HashMap;
import java.util.Scanner;
import java.util.Set;
import java.util.TreeMap;

/*
    1:键盘录入一个字符串
    2:创建 ashman集合,键是 Character,值是 Integer
    3:遍历字符串,得到每一个字符
    4:拿得到的每一个字符作为键到 Hashmap集合中去找对应的值,看其返回值
        如果返回值是nuLL:说明该字符在 Hashmap集合中不存在,就把该字符作为键,1作为值存储
        如果返回值不是nuLL符在 Hashmap集合中存在,把该值加1,然后重新存储该字符和对应的值
    5:遍历 Hashmap集合,得到键和值,按照要求进行拼接
    6:输出结果
 */
public class HashMapDemo {
    public static void main(String[] args) {
        //键盘录入一个字符串
        Scanner sc = new Scanner(System.in);
        System.out.println("请输入一个字符串：");
        String line = sc.nextLine();

        //创建 Hashman集合,键是 Character,值是 Integer
//        HashMap<Character,Integer> hm = new HashMap<Character,Integer>();
        TreeMap<Character, Integer> hm = new TreeMap<Character, Integer>();

        //遍历字符串,得到每一个字符
        for (int i = 0; i < line.length(); i++) {
            char key = line.charAt(i);

            //拿得到的每一个字符作为键到 Hashmap集合中去找对应的值,看其返回值
            Integer value = hm.get(key);

            if (value == null) {
                //如果返回值是nuLL:说明该字符在 Hashmap集合中不存在,就把该字符作为键,1作为值存储
                hm.put(key, 1);
            } else {
                //如果返回值不是nuLL符在 Hashmap集合中存在,把该值加1,然后重新存储该字符和对应的值
                value++;
                hm.put(key, value);
            }
        }
        //遍历 Hashmap集合,得到键和值,按照要求进行拼接
        StringBuilder sb = new StringBuilder();

        Set<Character> keySet = hm.keySet();
        for (Character key : keySet) {
            Integer value = hm.get(key);
            sb.append(key).append("(").append(value).append(")");
        }

        String result = sb.toString();

        //输出结果
        System.out.println(result);
        //请输入一个字符串：
        //asdwaswasredsradwdsda
        //a(5)d(5)e(1)r(2)s(5)w(3)
    }
}
```



## 6.Collections

### 1.Collections 概述和使用

![](https://github.com/Continuers/Java/blob/main/picture/224.png)

```java
package cn.itrs8;

import java.util.ArrayList;
import java.util.Collection;
import java.util.Collections;
import java.util.List;

/*
    Collections类的概述
        是针对集合操作的工具类

    Collections类的常用方法
        public static< T extends Comparable<? super T>> void sort(List<T>List):将指定的列表按升序排序
        public static void reverse(List<?>tist):反转指定列表中元素的顺序
        public static void shuffle(List<?>List):使用默认的随机源随机排列指定的列表
 */
public class CollectionsDemo {
    public static void main(String[] args) {
        List<Integer> list = new ArrayList<Integer>();

        list.add(30);
        list.add(20);
        list.add(50);
        list.add(10);
        list.add(40);

        //public static< T extends Comparable<? super T>> void sort(List<T>List):将指定的列表按升序排序
//        Collections.sort(list);

        //public static void reverse(List<?>tist):反转指定列表中元素的顺序
//        Collections.reverse(list);

        //public static void shuffle(List<?>List):使用默认的随机源随机排列指定的列表
        Collections.shuffle(list);

        System.out.println(list);
    }
}
```

### 案例：ArrayList存储学生对象并排序

![](https://github.com/Continuers/Java/blob/main/picture/225.png)

```java
package cn.itrs8;

public class Student {
    private String name;
    private int age;

    public Student() {}

    public Student(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }
}
```

```java
package cn.itrs8;

import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
/*
    需求：
        Arraylist存储学生对象,使用 Collections对 Arraylist进行排序
        要求:按照年龄从小到大排序,年龄相同时,按照姓名的字母顺序排序
 */
public class CollectionsDemo2 {
    public static void main(String[] args) {
        ArrayList<Student> array = new ArrayList<Student>();

        Student s1 = new Student("java", 100);
        Student s2 = new Student("javaweb", 99);
        Student s3 = new Student("javaee", 98);
        Student s4 = new Student("javase",97);

        array.add(s1);
        array.add(s2);
        array.add(s3);
        array.add(s4);

        //使用Collections对ArrayList集合排序
        //sort (List<T> list, Comparator<? super T> c)
        Collections.sort(array, new Comparator<Student>() {
            @Override
            public int compare(Student s1, Student s2) {
                int num = s1.getAge()- s2.getAge();
                int num2 = num ==0?s1.getName().compareTo(s2.getName()):num;
                return num2;
            }
        });

        //遍历集合
        for (Student s:array){
            System.out.println(s.getName()+","+s.getAge());
        }
    }
}
```



### 案例：模拟斗地主

![](https://github.com/Continuers/Java/blob/main/picture/226.png)

```java
package cn.itrs9;

import java.util.ArrayList;
import java.util.Collections;

/*
    需求
        通过程序实现斗地王过程中的洗牌,发牌和看牌
    思路
        1:创建一个牌盒,也就是定义一个集合对象,用 Arraylist集合实现
        2:任牌盒里面装牌
        3:洗牌,也就是把牌打撤,用 Collections的 shuffle()方法实现
        4:发牌,也就是遍历集合,给三个玩家发牌
        5:看牌,也就是三个玩家分别历自己的牌
 */
public class PokerDemo {
    public static void main(String[] args) {
        //创建一个牌盒,也就是定义一个集合对象,用 Arraylist集合实现
        ArrayList<String> array = new ArrayList<String>();

        //任牌盒里面装牌
        /*
            ♦2，3，4，...k,A
            ♣2...
            ♥2...
            ♠2...
            大小王
         */
        //定义花色数组
        String[] colors = {"♦", "♣", "♥", "♠"};
        //定义点数数组
        String[] numbers = {"2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"};
        for (String color : colors) {
            for (String number : numbers) {
                array.add(color + number);
            }
        }
        array.add("小王");
        array.add("大王");

        //洗牌,也就是把牌打撤,用 Collections的 shuffle()方法实现
        Collections.shuffle(array);

//        System.out.println(array);

        //发牌,也就是遍历集合,给三个玩家发牌
        ArrayList<String> iArray = new ArrayList<String>();
        ArrayList<String> mhtArray = new ArrayList<String>();
        ArrayList<String> myArray = new ArrayList<String>();
        ArrayList<String> dpArray = new ArrayList<String>();

        for (int i = 0; i < array.size(); i++) {
            String poker = array.get(i);

            if (i >= array.size() - 3) {
                dpArray.add(poker);
            } else if (i % 3 == 0) {
                iArray.add(poker);
            } else if (i % 3 == 1) {
                mhtArray.add(poker);
            } else if (i % 3 == 2) {
                myArray.add(poker);
            }
        }

        //看牌,也就是三个玩家分别历自己的牌
        lookPoker("我",iArray);
        lookPoker("马化腾",mhtArray);
        lookPoker("马云",myArray);
        lookPoker("底牌",dpArray);

    }

    //看牌的方法
    public static void lookPoker(String name,ArrayList<String> array){
        System.out.println(name+"的牌是：");
        for (String poker : array){
            System.out.print(poker+" ");
        }
        System.out.println();
    }
}
```



### 案例：模拟斗地主升级版

![](https://github.com/Continuers/Java/blob/main/picture/227.png)

![](https://github.com/Continuers/Java/blob/main/picture/228.png)

```java
package cn.itrs9;

import java.util.ArrayList;
import java.util.Collections;
import java.util.HashMap;
import java.util.TreeSet;

/*
    需求:
        通过程序实现斗地主过程中的洗牌,发牌和看牌。要求:对牌进行排序
    思路
        1:创建 Hashmap,键是编号,值是牌
        2:创建 Arraylist,存储编号
        3:创建花色数组和点数数组
        4:从开始往 Hashmap里面存储编号,并存储对应的牌。同时往 Arraylist里面存储编号
        5:洗牌(冼的是编号),用 Collections的 shuffle()方法实现
        6:发牌(发的也是编号,为了保证编号是排序的,创建 Treeset集合接收)
        7:定义方法看牌(遍历 Treeset集合,获取编号,到 Hashmap集合找对应的牌
        8:调用看牌方法
 */
public class PokerDemo2 {
    public static void main(String[] args) {
        //创建 Hashmap,键是编号,值是牌
        HashMap<Integer, String> hm = new HashMap<Integer, String>();

        //创建 Arraylist,存储编号
        ArrayList<Integer> array = new ArrayList<Integer>();

        //创建花色数组和点数数组
        String[] colors = {"♦", "♣", "♥", "♠"};
        String[] numbers = {"3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A", "2"};

        //从开始往 Hashmap里面存储编号,并存储对应的牌。同时往 Arraylist里面存储编号
        int index = 0;

        for (String number : numbers) {
            for (String color : colors) {
                hm.put(index, color + number);
                array.add(index);
                index++;
            }
        }
        hm.put(index, "小王");
        array.add(index);
        index++;
        hm.put(index, "大王");
        array.add(index);

        //洗牌(冼的是编号),用 Collections的 shuffle()方法实现
        Collections.shuffle(array);

        //发牌(发的也是编号,为了保证编号是排序的,创建 Treeset集合接收)
        TreeSet<Integer> iSet = new TreeSet<Integer>();
        TreeSet<Integer> mhtSet = new TreeSet<Integer>();
        TreeSet<Integer> mySet = new TreeSet<Integer>();
        TreeSet<Integer> dpSet = new TreeSet<Integer>();

        for (int i = 0; i < array.size(); i++) {
            int x = array.get(i);
            if (i >= array.size() - 3) {
                dpSet.add(x);
            } else if (i % 3 == 0) {
                iSet.add(x);
            } else if (i % 3 == 1) {
                mhtSet.add(x);
            } else if (i % 3 == 2) {
                mySet.add(x);
            }
        }

        //调用看牌方法
        lookPoker("我",iSet,hm);
        lookPoker("马化腾",mhtSet,hm);
        lookPoker("马云",mySet,hm);
        lookPoker("底牌",dpSet,hm);
    }

    //定义方法看牌(遍历 Treeset集合,获取编号,到 Hashmap集合找对应的牌
    public static void lookPoker(String name,TreeSet<Integer> ts, HashMap<Integer,String> hm){
        System.out.println(name+"的牌是：");
        for (Integer key : ts){
            String poker = hm.get(key);
            System.out.print(poker+" ");
        }
        System.out.println();
    }
}
```
